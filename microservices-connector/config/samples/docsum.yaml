# Copyright (C) 2024 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

apiVersion: gmc.opea.io/v1alpha3
kind: GMConnector
metadata:
  labels:
    app.kubernetes.io/name: gmconnector
    app.kubernetes.io/managed-by: kustomize
  name: docsum
  namespace: docsum
spec:
  routerConfig:
    name: router
    serviceName: router-service
  nodes:
    root:
      routerType: Sequence
      steps:
      - name: Tgi
        internalService:
          serviceName: tgi-service
          config:
            LLM_MODEL_ID: HuggingFaceH4/zephyr-7b-beta
            shm-size: "1g"
            endpoint: /generate
      - name: DocSum
        data: $response
        internalService:
          serviceName: docsum-service
          config:
            endpoint: /v1/text_summarize
